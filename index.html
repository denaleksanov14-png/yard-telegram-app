<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—ã–±–æ—Ä –æ–∫—Ä—É–≥–∞ –∏ —Ä–∞–π–æ–Ω–∞ –ú–æ—Å–∫–≤—ã</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 20px;
            margin-bottom: 5px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 14px;
        }
        
        .step-indicator {
            display: flex;
            background: white;
            padding: 15px 20px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .step {
            flex: 1;
            text-align: center;
            padding: 10px;
            font-size: 14px;
            color: #999;
            position: relative;
        }
        
        .step.active {
            color: #667eea;
            font-weight: 600;
        }
        
        .step.active::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 3px;
            background: #667eea;
            border-radius: 2px;
        }
        
        .content {
            background: white;
            margin: 10px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .search-box {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
        }
        
        .search-box input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .list-item {
            padding: 15px 20px;
            border-bottom: 1px solid #f5f5f5;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: background-color 0.2s;
        }
        
        .list-item:last-child {
            border-bottom: none;
        }
        
        .list-item:hover {
            background-color: #f8f9fa;
        }
        
        .list-item.selected {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
        }
        
        .item-emoji {
            margin-right: 12px;
            font-size: 18px;
        }
        
        .item-text {
            flex: 1;
        }
        
        .item-name {
            font-weight: 500;
            margin-bottom: 2px;
        }
        
        .item-info {
            font-size: 12px;
            color: #666;
        }
        
        .checkmark {
            color: #2196f3;
            font-size: 18px;
            opacity: 0;
            transition: opacity 0.2s;
        }
        
        .selected .checkmark {
            opacity: 1;
        }
        
        .buttons {
            padding: 15px;
            background: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
        }
        
        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-next {
            background: #667eea;
            color: white;
        }
        
        .btn-next:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .btn-back {
            background: #f8f9fa;
            color: #333;
            border: 1px solid #e0e0e0;
        }
        
        .step-content {
            display: none;
        }
        
        .step-content.active {
            display: block;
        }
        
        .no-results {
            text-align: center;
            padding: 40px 20px;
            color: #666;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 id="title">–í—ã–±–æ—Ä –æ–∫—Ä—É–≥–∞ –ú–æ—Å–∫–≤—ã</h1>
            <p id="subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –æ–∫—Ä—É–≥</p>
        </div>
        
        <div class="step-indicator">
            <div class="step active" id="step1-indicator">1. –û–∫—Ä—É–≥</div>
            <div class="step" id="step2-indicator">2. –†–∞–π–æ–Ω</div>
        </div>
        
        <!-- –®–∞–≥ 1: –í—ã–±–æ—Ä –æ–∫—Ä—É–≥–∞ -->
        <div class="step-content active" id="step1">
            <div class="content">
                <div class="search-box">
                    <input type="text" id="searchDistrict" placeholder="–ü–æ–∏—Å–∫ –æ–∫—Ä—É–≥–∞...">
                </div>
                <div class="list" id="districtsList">
                    <!-- –°–ø–∏—Å–æ–∫ –æ–∫—Ä—É–≥–æ–≤ -->
                </div>
            </div>
            <div class="buttons">
                <button class="btn btn-next" id="nextBtn" disabled>–î–∞–ª–µ–µ</button>
            </div>
        </div>
        
        <!-- –®–∞–≥ 2: –í—ã–±–æ—Ä —Ä–∞–π–æ–Ω–∞ -->
        <div class="step-content" id="step2">
            <div class="content">
                <div class="search-box">
                    <input type="text" id="searchArea" placeholder="–ü–æ–∏—Å–∫ —Ä–∞–π–æ–Ω–∞...">
                </div>
                <div class="list" id="areasList">
                    <!-- –°–ø–∏—Å–æ–∫ —Ä–∞–π–æ–Ω–æ–≤ -->
                </div>
            </div>
            <div class="buttons">
                <button class="btn btn-back" id="backBtn">–ù–∞–∑–∞–¥</button>
                <button class="btn btn-next" id="confirmBtn" disabled>–í—ã–±—Ä–∞—Ç—å</button>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –æ–∫—Ä—É–≥–æ–≤ –∏ —Ä–∞–π–æ–Ω–æ–≤ –ú–æ—Å–∫–≤—ã
        const moscowData = [
            { 
                id: 1, 
                name: "–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π", 
                emoji: "üèõÔ∏è",
                areas: ["–ê—Ä–±–∞—Ç", "–ë–∞—Å–º–∞–Ω–Ω—ã–π", "–ó–∞–º–æ—Å–∫–≤–æ—Ä–µ—á—å–µ", "–ö—Ä–∞—Å–Ω–æ—Å–µ–ª—å—Å–∫–∏–π", "–ú–µ—â–∞–Ω—Å–∫–∏–π", "–ü—Ä–µ—Å–Ω–µ–Ω—Å–∫–∏–π", "–¢–∞–≥–∞–Ω—Å–∫–∏–π", "–¢–≤–µ—Ä—Å–∫–æ–π", "–•–∞–º–æ–≤–Ω–∏–∫–∏", "–Ø–∫–∏–º–∞–Ω–∫–∞"]
            },
            { 
                id: 2, 
                name: "–°–µ–≤–µ—Ä–Ω—ã–π", 
                emoji: "üå≤",
                areas: ["–ê—ç—Ä–æ–ø–æ—Ä—Ç", "–ë–µ–≥–æ–≤–æ–π", "–ë–µ—Å–∫—É–¥–Ω–∏–∫–æ–≤—Å–∫–∏–π", "–í–æ–π–∫–æ–≤—Å–∫–∏–π", "–í–æ—Å—Ç–æ—á–Ω–æ–µ –î–µ–≥—É–Ω–∏–Ω–æ", "–ì–æ–ª–æ–≤–∏–Ω—Å–∫–∏–π", "–î–º–∏—Ç—Ä–æ–≤—Å–∫–∏–π", "–ó–∞–ø–∞–¥–Ω–æ–µ –î–µ–≥—É–Ω–∏–Ω–æ", "–ö–æ–ø—Ç–µ–≤–æ", "–õ–µ–≤–æ–±–µ—Ä–µ–∂–Ω—ã–π", "–ú–æ–ª–∂–∞–Ω–∏–Ω–æ–≤—Å–∫–∏–π", "–°–∞–≤—ë–ª–æ–≤—Å–∫–∏–π", "–°–æ–∫–æ–ª", "–¢–∏–º–∏—Ä—è–∑–µ–≤—Å–∫–∏–π", "–•–æ–≤—Ä–∏–Ω–æ", "–•–æ—Ä–æ—à—ë–≤—Å–∫–∏–π"]
            },
            { 
                id: 3, 
                name: "–°–µ–≤–µ—Ä–æ-–í–æ—Å—Ç–æ—á–Ω—ã–π", 
                emoji: "üèòÔ∏è",
                areas: ["–ê–ª–µ–∫—Å–µ–µ–≤—Å–∫–∏–π", "–ê–ª—Ç—É—Ñ—å–µ–≤—Å–∫–∏–π", "–ë–∞–±—É—à–∫–∏–Ω—Å–∫–∏–π", "–ë–∏–±–∏—Ä–µ–≤–æ", "–ë—É—Ç—ã—Ä—Å–∫–∏–π", "–õ–∏–∞–Ω–æ–∑–æ–≤–æ", "–õ–æ—Å–∏–Ω–æ–æ—Å—Ç—Ä–æ–≤—Å–∫–∏–π", "–ú–∞—Ä—Ñ–∏–Ω–æ", "–ú–∞—Ä—å–∏–Ω–∞ –†–æ—â–∞", "–û—Å—Ç–∞–Ω–∫–∏–Ω—Å–∫–∏–π", "–û—Ç—Ä–∞–¥–Ω–æ–µ", "–†–æ—Å—Ç–æ–∫–∏–Ω–æ", "–°–≤–∏–±–ª–æ–≤–æ", "–°–µ–≤–µ—Ä–Ω—ã–π", "–°–µ–≤–µ—Ä–Ω–æ–µ –ú–µ–¥–≤–µ–¥–∫–æ–≤–æ", "–Æ–∂–Ω–æ–µ –ú–µ–¥–≤–µ–¥–∫–æ–≤–æ", "–Ø—Ä–æ—Å–ª–∞–≤—Å–∫–∏–π"]
            },
            { 
                id: 4, 
                name: "–í–æ—Å—Ç–æ—á–Ω—ã–π", 
                emoji: "üåÖ",
                areas: ["–ë–æ–≥–æ—Ä–æ–¥—Å–∫–æ–µ", "–í–µ—à–Ω—è–∫–∏", "–í–æ—Å—Ç–æ—á–Ω–æ–µ –ò–∑–º–∞–π–ª–æ–≤–æ", "–í–æ—Å—Ç–æ—á–Ω—ã–π", "–ì–æ–ª—å—è–Ω–æ–≤–æ", "–ò–≤–∞–Ω–æ–≤—Å–∫–æ–µ", "–ò–∑–º–∞–π–ª–æ–≤–æ", "–ö–æ—Å–∏–Ω–æ-–£—Ö—Ç–æ–º—Å–∫–∏–π", "–ú–µ—Ç—Ä–æ–≥–æ—Ä–æ–¥–æ–∫", "–ù–æ–≤–æ–≥–∏—Ä–µ–µ–≤–æ", "–ù–æ–≤–æ–∫–æ—Å–∏–Ω–æ", "–ü–µ—Ä–æ–≤–æ", "–ü—Ä–µ–æ–±—Ä–∞–∂–µ–Ω—Å–∫–æ–µ", "–°–µ–≤–µ—Ä–Ω–æ–µ –ò–∑–º–∞–π–ª–æ–≤–æ", "–°–æ–∫–æ–ª–∏–Ω–∞—è –ì–æ—Ä–∞", "–°–æ–∫–æ–ª—å–Ω–∏–∫–∏"]
            },
            { 
                id: 5, 
                name: "–Æ–≥–æ-–í–æ—Å—Ç–æ—á–Ω—ã–π", 
                emoji: "üè≠",
                areas: ["–í—ã—Ö–∏–Ω–æ-–ñ—É–ª–µ–±–∏–Ω–æ", "–ö–∞–ø–æ—Ç–Ω—è", "–ö—É–∑—å–º–∏–Ω–∫–∏", "–õ–µ—Ñ–æ—Ä—Ç–æ–≤–æ", "–õ—é–±–ª–∏–Ω–æ", "–ú–∞—Ä—å–∏–Ω–æ", "–ù–µ–∫—Ä–∞—Å–æ–≤–∫–∞", "–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∏–π", "–ü–µ—á–∞—Ç–Ω–∏–∫–∏", "–†—è–∑–∞–Ω—Å–∫–∏–π", "–¢–µ–∫—Å—Ç–∏–ª—å—â–∏–∫–∏", "–Æ–∂–Ω–æ–ø–æ—Ä—Ç–æ–≤—ã–π"]
            },
            { 
                id: 6, 
                name: "–Æ–∂–Ω—ã–π", 
                emoji: "üåá",
                areas: ["–ë–∏—Ä—é–ª—ë–≤–æ –í–æ—Å—Ç–æ—á–Ω–æ–µ", "–ë–∏—Ä—é–ª—ë–≤–æ –ó–∞–ø–∞–¥–Ω–æ–µ", "–ë—Ä–∞—Ç–µ–µ–≤–æ", "–î–∞–Ω–∏–ª–æ–≤—Å–∫–∏–π", "–î–æ–Ω—Å–∫–æ–π", "–ó—è–±–ª–∏–∫–æ–≤–æ", "–ú–æ—Å–∫–≤–æ—Ä–µ—á—å–µ-–°–∞–±—É—Ä–æ–≤–æ", "–ù–∞–≥–∞—Ç–∏–Ω–æ-–°–∞–¥–æ–≤–Ω–∏–∫–∏", "–ù–∞–≥–∞—Ç–∏–Ω—Å–∫–∏–π –ó–∞—Ç–æ–Ω", "–ù–∞–≥–æ—Ä–Ω—ã–π", "–û—Ä–µ—Ö–æ–≤–æ-–ë–æ—Ä–∏—Å–æ–≤–æ –°–µ–≤–µ—Ä–Ω–æ–µ", "–û—Ä–µ—Ö–æ–≤–æ-–ë–æ—Ä–∏—Å–æ–≤–æ –Æ–∂–Ω–æ–µ", "–¶–∞—Ä–∏—Ü—ã–Ω–æ", "–ß–µ—Ä—Ç–∞–Ω–æ–≤–æ –°–µ–≤–µ—Ä–Ω–æ–µ", "–ß–µ—Ä—Ç–∞–Ω–æ–≤–æ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ", "–ß–µ—Ä—Ç–∞–Ω–æ–≤–æ –Æ–∂–Ω–æ–µ"]
            },
            { 
                id: 7, 
                name: "–Æ–≥–æ-–ó–∞–ø–∞–¥–Ω—ã–π", 
                emoji: "üéì",
                areas: ["–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π", "–ì–∞–≥–∞—Ä–∏–Ω—Å–∫–∏–π", "–ó—é–∑–∏–Ω–æ", "–ö–æ–Ω—å–∫–æ–≤–æ", "–ö–æ—Ç–ª–æ–≤–∫–∞", "–õ–æ–º–æ–Ω–æ—Å–æ–≤—Å–∫–∏–π", "–û–±—Ä—É—á–µ–≤—Å–∫–∏–π", "–°–µ–≤–µ—Ä–Ω–æ–µ –ë—É—Ç–æ–≤–æ", "–¢—ë–ø–ª—ã–π –°—Ç–∞–Ω", "–ß–µ—Ä—ë–º—É—à–∫–∏", "–Æ–∂–Ω–æ–µ –ë—É—Ç–æ–≤–æ", "–Ø—Å–µ–Ω–µ–≤–æ"]
            },
            { 
                id: 8, 
                name: "–ó–∞–ø–∞–¥–Ω—ã–π", 
                emoji: "üíº",
                areas: ["–í–Ω—É–∫–æ–≤–æ", "–î–æ—Ä–æ–≥–æ–º–∏–ª–æ–≤–æ", "–ö—Ä—ã–ª–∞—Ç—Å–∫–æ–µ", "–ö—É–Ω—Ü–µ–≤–æ", "–ú–æ–∂–∞–π—Å–∫–∏–π", "–ù–æ–≤–æ-–ü–µ—Ä–µ–¥–µ–ª–∫–∏–Ω–æ", "–û—á–∞–∫–æ–≤–æ-–ú–∞—Ç–≤–µ–µ–≤—Å–∫–æ–µ", "–ü—Ä–æ—Å–ø–µ–∫—Ç –í–µ—Ä–Ω–∞–¥—Å–∫–æ–≥–æ", "–†–∞–º–µ–Ω–∫–∏", "–°–æ–ª–Ω—Ü–µ–≤–æ", "–¢—Ä–æ–ø–∞—Ä—ë–≤–æ-–ù–∏–∫—É–ª–∏–Ω–æ", "–§–∏–ª—ë–≤—Å–∫–∏–π –ü–∞—Ä–∫", "–§–∏–ª–∏-–î–∞–≤—ã–¥–∫–æ–≤–æ"]
            },
            { 
                id: 9, 
                name: "–°–µ–≤–µ—Ä–æ-–ó–∞–ø–∞–¥–Ω—ã–π", 
                emoji: "üèûÔ∏è",
                areas: ["–ö—É—Ä–∫–∏–Ω–æ", "–ú–∏—Ç–∏–Ω–æ", "–ü–æ–∫—Ä–æ–≤—Å–∫–æ–µ-–°—Ç—Ä–µ—à–Ω–µ–≤–æ", "–°–µ–≤–µ—Ä–Ω–æ–µ –¢—É—à–∏–Ω–æ", "–°—Ç—Ä–æ–≥–∏–Ω–æ", "–•–æ—Ä–æ—à—ë–≤–æ-–ú–Ω—ë–≤–Ω–∏–∫–∏", "–©—É–∫–∏–Ω–æ", "–Æ–∂–Ω–æ–µ –¢—É—à–∏–Ω–æ"]
            },
            { 
                id: 10, 
                name: "–ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥—Å–∫–∏–π", 
                emoji: "üå≥",
                areas: ["–ö—Ä—é–∫–æ–≤–æ", "–ú–∞—Ç—É—à–∫–∏–Ω–æ", "–°–∞–≤–µ–ª–∫–∏", "–°–∏–ª–∏–Ω–æ", "–°—Ç–∞—Ä–æ–µ –ö—Ä—é–∫–æ–≤–æ"]
            }
        ];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram
        const tg = window.Telegram.WebApp;
        tg.expand();
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let currentStep = 1;
        let selectedDistrict = null;
        let selectedArea = null;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            renderDistricts();
            setupEventListeners();
        }

        // –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ –æ–∫—Ä—É–≥–æ–≤
        function renderDistricts(filter = '') {
            const container = document.getElementById('districtsList');
            const filtered = moscowData.filter(district => 
                district.name.toLowerCase().includes(filter.toLowerCase())
            );
            
            if (filtered.length === 0) {
                container.innerHTML = '<div class="no-results">–û–∫—Ä—É–≥–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                return;
            }
            
            container.innerHTML = filtered.map(district => `
                <div class="list-item ${selectedDistrict?.id === district.id ? 'selected' : ''}" data-id="${district.id}">
                    <div class="item-emoji">${district.emoji}</div>
                    <div class="item-text">
                        <div class="item-name">${district.name} –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –æ–∫—Ä—É–≥</div>
                        <div class="item-info">${district.areas.length} —Ä–∞–π–æ–Ω–æ–≤</div>
                    </div>
                    <div class="checkmark">‚úì</div>
                </div>
            `).join('');
            
            // –ü–µ—Ä–µ–ø—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            document.querySelectorAll('#districtsList .list-item').forEach(item => {
                item.addEventListener('click', () => {
                    const districtId = parseInt(item.dataset.id);
                    selectDistrict(districtId);
                });
            });
        }

        // –†–µ–Ω–¥–µ—Ä —Å–ø–∏—Å–∫–∞ —Ä–∞–π–æ–Ω–æ–≤
        function renderAreas(filter = '') {
            const container = document.getElementById('areasList');
            if (!selectedDistrict) return;
            
            const filtered = selectedDistrict.areas.filter(area => 
                area.toLowerCase().includes(filter.toLowerCase())
            );
            
            if (filtered.length === 0) {
                container.
                    innerHTML = '<div class="no-results">–†–∞–π–æ–Ω–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
                return;
            }
            
            container.innerHTML = filtered.map(area => `
                <div class="list-item ${selectedArea === area ? 'selected' : ''}" data-area="${area}">
                    <div class="item-emoji">üèòÔ∏è</div>
                    <div class="item-text">
                        <div class="item-name">${area}</div>
                    </div>
                    <div class="checkmark">‚úì</div>
                </div>
            `).join('');
            
            // –ü–µ—Ä–µ–ø—Ä–∏–≤—è–∑—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            document.querySelectorAll('#areasList .list-item').forEach(item => {
                item.addEventListener('click', () => {
                    const areaName = item.dataset.area;
                    selectArea(areaName);
                });
            });
        }

        // –í—ã–±–æ—Ä –æ–∫—Ä—É–≥–∞
        function selectDistrict(districtId) {
            selectedDistrict = moscowData.find(d => d.id === districtId);
            renderDistricts(document.getElementById('searchDistrict').value);
            updateNextButton();
        }

        // –í—ã–±–æ—Ä —Ä–∞–π–æ–Ω–∞
        function selectArea(areaName) {
            selectedArea = areaName;
            renderAreas(document.getElementById('searchArea').value);
            updateConfirmButton();
        }

        // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É
        function nextStep() {
            if (currentStep === 1 && selectedDistrict) {
                currentStep = 2;
                updateUI();
                renderAreas();
            }
        }

        // –í–æ–∑–≤—Ä–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —à–∞–≥—É
        function prevStep() {
            if (currentStep === 2) {
                currentStep = 1;
                updateUI();
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —à–∞–≥–æ–≤
            document.getElementById('step1-indicator').classList.toggle('active', currentStep === 1);
            document.getElementById('step2-indicator').classList.toggle('active', currentStep === 2);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç —à–∞–≥–æ–≤
            document.getElementById('step1').classList.toggle('active', currentStep === 1);
            document.getElementById('step2').classList.toggle('active', currentStep === 2);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏
            if (currentStep === 1) {
                document.getElementById('title').textContent = '–í—ã–±–æ—Ä –æ–∫—Ä—É–≥–∞ –ú–æ—Å–∫–≤—ã';
                document.getElementById('subtitle').textContent = '–í—ã–±–µ—Ä–∏—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –æ–∫—Ä—É–≥';
            } else {
                document.getElementById('title').textContent = selectedDistrict.name + ' –æ–∫—Ä—É–≥';
                document.getElementById('subtitle').textContent = '–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–π–æ–Ω';
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–î–∞–ª–µ–µ"
        function updateNextButton() {
            document.getElementById('nextBtn').disabled = !selectedDistrict;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–í—ã–±—Ä–∞—Ç—å"
        function updateConfirmButton() {
            document.getElementById('confirmBtn').disabled = !selectedArea;
        }

        // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞
        function confirmSelection() {
            if (selectedDistrict && selectedArea) {
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram
                tg.sendData(JSON.stringify({
                    district: selectedDistrict.name,
                    area: selectedArea,
                    district_emoji: selectedDistrict.emoji
                }));
                
                tg.close();
            }
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –ü–æ–∏—Å–∫ –æ–∫—Ä—É–≥–æ–≤
            document.getElementById('searchDistrict').addEventListener('input', (e) => {
                renderDistricts(e.target.value);
            });
            
            // –ü–æ–∏—Å–∫ —Ä–∞–π–æ–Ω–æ–≤
            document.getElementById('searchArea').addEventListener('input', (e) => {
                renderAreas(e.target.value);
                });
            
            // –ö–Ω–æ–ø–∫–∏
            document.getElementById('nextBtn').addEventListener('click', nextStep);
            document.getElementById('backBtn').addEventListener('click', prevStep);
            document.getElementById('confirmBtn').addEventListener('click', confirmSelection);
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
